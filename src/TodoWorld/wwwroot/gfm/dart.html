<div class="gfm"><h2>
<a id="user-content-dart-google-protoc-generated-grpcserviceclient-example" class="anchor" href="#dart-google-protoc-generated-grpcserviceclient-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dart Google protoc generated GrpcServiceClient Example</h2>
<p>Install <a href="https://docs.servicestack.net/web-tool" rel="nofollow">x dotnet tool</a>:</p>
<pre><code>$ dotnet tool install --global x 
</code></pre>
<p>Install <a href="https://pub.dev/packages/stagehand" rel="nofollow">stagehand</a>:</p>
<pre><code>$ pub global activate stagehand
</code></pre>
<p>Create a new Dart Console App:</p>
<pre><code>$ stagehand console-full
</code></pre>
<p>Add required dependencies to <strong>pubspec.yaml</strong>:</p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">dependencies</span>:
  <span class="pl-ent">fixnum</span>: <span class="pl-s">^0.10.11</span>
  <span class="pl-ent">async</span>: <span class="pl-s">^2.2.0</span>
  <span class="pl-ent">protobuf</span>: <span class="pl-s">^1.0.1</span>
  <span class="pl-ent">grpc</span>: <span class="pl-s">^2.1.3</span></pre></div>
<p>Install dependencies:</p>
<pre><code>$ pub get
</code></pre>
<p>Add protoc generated TodoWorld DTOs and gRPC GrpcServiceClient to <code>lib/</code> folder:</p>
<pre><code>$ x proto-dart https://todoworld.servicestack.net -out lib
</code></pre>
<h3>
<a id="user-content-dart-protoc-grpc-insecure-example" class="anchor" href="#dart-protoc-grpc-insecure-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dart protoc gRPC insecure Example</h3>
<p>Use protoc generated DTOs and <code>GrpcServiceClient</code> to call TodoWorld gRPC Service in <code>bin/main.dart</code>:</p>
<div class="highlight highlight-source-dart"><pre><span class="pl-k">import</span> <span class="pl-s">'dart:io'</span>;
<span class="pl-k">import</span> <span class="pl-s">'package:grpc/grpc.dart'</span>;
<span class="pl-k">import</span> <span class="pl-s">'package:TodoWorld/services.pb.dart'</span>;
<span class="pl-k">import</span> <span class="pl-s">'package:TodoWorld/services.pbgrpc.dart'</span>;

<span class="pl-k">void</span> <span class="pl-en">main</span>(<span class="pl-c1">List</span><span class="pl-k">&lt;</span><span class="pl-c1">String</span><span class="pl-k">&gt;</span> args) <span class="pl-k">async</span> {

  <span class="pl-k">var</span> client <span class="pl-k">=</span> <span class="pl-c1">GrpcServicesClient</span>(<span class="pl-c1">ClientChannel</span>(<span class="pl-s">'todoworld.servicestack.net'</span>, port<span class="pl-k">:</span><span class="pl-c1">5054</span>,
    options<span class="pl-k">:</span><span class="pl-c1">ChannelOptions</span>(credentials<span class="pl-k">:</span> <span class="pl-c1">ChannelCredentials</span>.<span class="pl-en">insecure</span>())));

  <span class="pl-k">var</span> response <span class="pl-k">=</span> <span class="pl-k">await</span> client.<span class="pl-en">getHello</span>(<span class="pl-c1">Hello</span>()..name <span class="pl-k">=</span> <span class="pl-s">'gRPC Dart'</span>);
  <span class="pl-en">print</span>(response.result);

  <span class="pl-en">exit</span>(<span class="pl-c1">0</span>);
}</pre></div>
<p>Override <code>bin/main.dart</code> with the above Dart Example:</p>
<pre><code>$ x mix todoworld-dart -out bin
</code></pre>
<p>Run example:</p>
<pre><code>$ dart run
</code></pre>
<h3>
<a id="user-content-dart-protoc-grpc-ssl-example" class="anchor" href="#dart-protoc-grpc-ssl-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dart protoc gRPC SSL Example</h3>
<p>Download TodoWorld SSL Certificate used for its gRPC HTTP/2 Services:</p>
<pre><code>$ x get https://todoworld.servicestack.net/grpc.crt 
</code></pre>
<p>Use certificate when initializing <code>GrpcServicesClient</code>:</p>
<div class="highlight highlight-source-dart"><pre><span class="pl-k">import</span> <span class="pl-s">'dart:io'</span>;
<span class="pl-k">import</span> <span class="pl-s">'package:grpc/grpc.dart'</span>;
<span class="pl-k">import</span> <span class="pl-s">'package:TodoWorld/services.pb.dart'</span>;
<span class="pl-k">import</span> <span class="pl-s">'package:TodoWorld/services.pbgrpc.dart'</span>;

<span class="pl-k">void</span> <span class="pl-en">main</span>(<span class="pl-c1">List</span><span class="pl-k">&lt;</span><span class="pl-c1">String</span><span class="pl-k">&gt;</span> args) <span class="pl-k">async</span> {

  <span class="pl-k">var</span> client <span class="pl-k">=</span> <span class="pl-c1">GrpcServicesClient</span>(<span class="pl-c1">ClientChannel</span>(<span class="pl-s">'todoworld.servicestack.net'</span>, port<span class="pl-k">:</span><span class="pl-c1">50051</span>,
    options<span class="pl-k">:</span><span class="pl-c1">ChannelOptions</span>(credentials<span class="pl-k">:</span> <span class="pl-c1">ChannelCredentials</span>.<span class="pl-en">secure</span>(
        certificates<span class="pl-k">:</span> <span class="pl-c1">File</span>(<span class="pl-s">'grpc.crt'</span>).<span class="pl-en">readAsBytesSync</span>(),
        authority<span class="pl-k">:</span> <span class="pl-s">'todoworld.servicestack.net'</span>))));

  <span class="pl-k">var</span> response <span class="pl-k">=</span> <span class="pl-k">await</span> client.<span class="pl-en">getHello</span>(<span class="pl-c1">Hello</span>()..name <span class="pl-k">=</span> <span class="pl-s">'gRPC Dart'</span>);
  <span class="pl-en">print</span>(response.result);

  <span class="pl-en">exit</span>(<span class="pl-c1">0</span>);
}</pre></div>
<p>Override <code>bin/main.dart</code> with the above Dart Example:</p>
<pre><code>$ x mix todoworld-dart-ssl -out bin
</code></pre>
<p>Run example:</p>
<pre><code>$ dart run
</code></pre>
</div>